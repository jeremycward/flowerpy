{% load static%}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="csrf-token" content="{{ csrf_token }}">
  <title>TimeFlower</title>
        <script type="module" src="{% static 'flowerapp/dist/index.js' %}"></script>
  {% include "flowerapp/flower_style.html" %}        
</head>

<body>

  <div class="app-wrapper" id="app-wrapper">

    <div class="dandelion_bg header " id="header">

        <div class="header_layout">

             <img src="{% static 'flowerapp/dist/croppedlogo.png' %}" alt="Logo" class="me-2"
        style="width:20%;height:auto;vertical-align: middle;padding-left: 50px;"/>

{% if user.is_authenticated %}
    <!--
    <p>Hello, {{ user.username }}!</p>
    <p>Email: {{ user.email }}</p>
    <p>Member since: {{ user.date_joined|date:"F Y" }}</p>
    {% csrf_token %}
    -->
{% endif %}        
      
      
      <div class="user-menu" style="margin-left: auto; padding-right: 50px; position: relative;">        
        {% if user.is_authenticated %}
          <div class="user-trigger sunflower-font" style="cursor: pointer; padding: 8px; font-size: 16px;">
            ðŸ‘¤ {{ user.username }}
          </div>
          <div class="user-dropdown">
            
            <form id="home-logout-form" method="post" action="/admin/logout/">
            {% csrf_token %}
            <button type="submit" class="dropdown-link" style="background: none; border: none; padding: 0; margin: 0; width: 100%; text-align: left; cursor: pointer;">Log Out</button>
            </form>
            
          </div>
        {% else %}
          <a href="{% url 'admin:login' %}" class="sunflower-font" style="color: inherit; text-decoration: none;">Login</a>
        {% endif %}
      </div>

      </div>

      
    </div>


    <div class="dandelion_bg sidebar sunflower-font" id="sidebar">
     
      {% comment %} {% include "flowerapp/browser_panel.html" %} {% endcomment %}
    </div>
    <div class=" main dandelion_alpha_bg app-panel-lhs-border " id="timeline_view_container">

      <flower-timeline-view>
        {% comment %} {% include "flowerapp/timeline_data.html" %} {% endcomment %}
      </flower-timeline-view>

    </div>




    <div class="app-panel dandelion_bg rhs_resize_gutter" id="rhs_resize_gutter">
    </div>
    <div class="app-panel rhs_panel  app-panel-rhs-border" id="rhs_panel_holder">
      <timeline-rhs-pane></timeline-rhs-pane>
    </div>

    <div class="app-panel dandelion_bg  rhs_sidebar" id="rhs_sidebar">

    </div>

    <div class="dandelion_bg footer" id="footer">
    </div>



  </div>

<style>
  /* Header layout should use flexbox */
  .header_layout {
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
  }

  /* CSS-only dropdown menu */
  .user-menu {
    position: relative;
    display: inline-block;
  }

  .user-dropdown {
    display: none;
    position: absolute;
    top: 100%;
    right: 0;
    background-color: var(--dandelion_yellow);
    border: 2px solid var(--dandelion_text);
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    min-width: 150px;
    z-index: 1000;
    /* Remove margin-top gap that prevents hovering */
    margin-top: 0px;
  }

  .user-menu:hover .user-dropdown {
    display: block;
  }

  .dropdown-link {
    display: block;
    padding: 12px 16px;
    color: var(--dandelion_text);
    text-decoration: none;
    border-bottom: 1px solid var(--dandelion_text);
    transition: background-color 0.2s ease;
  }

  .dropdown-link:last-child {
    border-bottom: none;
  }

  .dropdown-link:hover {
    background-color: var(--dandelion_text);
    color: var(--dandelion_yellow);
  }

  .user-trigger:hover {
    background-color: rgba(249, 156, 27, 0.3);
    border-radius: 4px;
  }
</style>

</body>

</html>
